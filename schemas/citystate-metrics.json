{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://mobius.systems/schemas/citystate-metrics.json",
  "title": "City-State Metrics",
  "description": "Complete metrics schema for a City-State in the Mobius HIVE system",
  "type": "object",
  "properties": {
    "citystate_id": {
      "type": "string",
      "description": "Unique identifier for the City-State",
      "pattern": "^[a-z0-9-]+$",
      "examples": ["aurora", "helix", "solace"]
    },
    "citystate_name": {
      "type": "string",
      "description": "Display name of the City-State",
      "examples": ["Aurora", "Helix", "Solace"]
    },
    "tier": {
      "type": "string",
      "description": "Current tier in the Cathedral promotion system",
      "enum": [
        "settling",
        "emergent",
        "ascending",
        "radiant",
        "elder",
        "drift",
        "compromised",
        "crisis"
      ]
    },
    "integrity": {
      "type": "object",
      "description": "Integrity metrics",
      "properties": {
        "gi_state": {
          "type": "number",
          "description": "Local governance integrity (0.0-1.0)",
          "minimum": 0,
          "maximum": 1,
          "examples": [0.972, 0.961, 0.958]
        },
        "mii_contribution": {
          "type": "number",
          "description": "Contribution to global MII",
          "minimum": 0,
          "maximum": 100,
          "examples": [2.5, 1.8, 1.3]
        },
        "drift_flags": {
          "type": "integer",
          "description": "Number of active drift warnings",
          "minimum": 0,
          "default": 0
        },
        "integrity_events": {
          "type": "integer",
          "description": "Positive integrity events this epoch",
          "minimum": 0
        }
      },
      "required": ["gi_state"]
    },
    "economy": {
      "type": "object",
      "description": "Economic metrics",
      "properties": {
        "gdp_state_usd": {
          "type": "number",
          "description": "Total digital GDP in USD",
          "minimum": 0
        },
        "v_ks_usd": {
          "type": "number",
          "description": "KS transaction value in USD",
          "minimum": 0
        },
        "v_mic_inflows_usd": {
          "type": "number",
          "description": "MIC inflow value in USD",
          "minimum": 0
        },
        "velocity": {
          "type": "number",
          "description": "Participation velocity (v)",
          "minimum": 0,
          "maximum": 3,
          "examples": [0.82, 0.74, 0.69]
        },
        "mic_price_usd": {
          "type": "number",
          "description": "Current MIC price",
          "minimum": 0
        },
        "ks_price_usd": {
          "type": "number",
          "description": "Current KS price",
          "minimum": 0
        }
      },
      "required": ["gdp_state_usd", "velocity"]
    },
    "population": {
      "type": "object",
      "description": "Population and participation metrics",
      "properties": {
        "total_citizens": {
          "type": "integer",
          "description": "Total registered citizens",
          "minimum": 0
        },
        "active_daily": {
          "type": "integer",
          "description": "Daily active users (DAU)",
          "minimum": 0
        },
        "active_monthly": {
          "type": "integer",
          "description": "Monthly active users (MAU)",
          "minimum": 0
        },
        "companion_agents": {
          "type": "integer",
          "description": "Number of active Companion Agents",
          "minimum": 0
        }
      }
    },
    "governance": {
      "type": "object",
      "description": "Governance structure",
      "properties": {
        "steward_id": {
          "type": "string",
          "description": "Current Steward identifier"
        },
        "custodian_agent_id": {
          "type": "string",
          "description": "Custodian Agent identifier"
        },
        "state_agent_id": {
          "type": "string",
          "description": "State Agent identifier"
        },
        "cathedral_status": {
          "type": "string",
          "description": "Cathedral oversight status",
          "enum": ["autonomous", "monitoring", "supervised", "probation"]
        }
      }
    },
    "trends": {
      "type": "object",
      "description": "Trend indicators",
      "properties": {
        "gi_state_trend": {
          "type": "string",
          "enum": ["rising", "stable", "declining", "critical"],
          "description": "GI_state trajectory"
        },
        "velocity_trend": {
          "type": "string",
          "enum": ["rising", "stable", "declining", "critical"],
          "description": "Velocity trajectory"
        },
        "gdp_trend": {
          "type": "string",
          "enum": ["growing", "stable", "declining", "collapsing"],
          "description": "GDP trajectory"
        }
      }
    },
    "timestamp": {
      "type": "string",
      "format": "date-time",
      "description": "Timestamp of metrics snapshot"
    },
    "epoch": {
      "type": "integer",
      "description": "Current epoch number",
      "minimum": 1
    },
    "cycle": {
      "type": "string",
      "description": "Current cycle identifier",
      "pattern": "^C-\\d+$",
      "examples": ["C-151", "C-152", "C-153"]
    }
  },
  "required": [
    "citystate_id",
    "citystate_name",
    "integrity",
    "economy",
    "timestamp"
  ],
  "additionalProperties": false,
  "examples": [
    {
      "citystate_id": "aurora",
      "citystate_name": "Aurora",
      "tier": "radiant",
      "integrity": {
        "gi_state": 0.972,
        "mii_contribution": 2.5,
        "drift_flags": 0,
        "integrity_events": 15
      },
      "economy": {
        "gdp_state_usd": 130000000,
        "v_ks_usd": 100000000,
        "v_mic_inflows_usd": 30000000,
        "velocity": 0.82,
        "mic_price_usd": 120000,
        "ks_price_usd": 100
      },
      "population": {
        "total_citizens": 120000,
        "active_daily": 48000,
        "active_monthly": 96000,
        "companion_agents": 5000
      },
      "governance": {
        "steward_id": "steward-aurora-001",
        "custodian_agent_id": "custodian-aurora",
        "state_agent_id": "state-aurora",
        "cathedral_status": "autonomous"
      },
      "trends": {
        "gi_state_trend": "stable",
        "velocity_trend": "rising",
        "gdp_trend": "growing"
      },
      "timestamp": "2025-12-03T13:00:00Z",
      "epoch": 27,
      "cycle": "C-153"
    }
  ]
}
