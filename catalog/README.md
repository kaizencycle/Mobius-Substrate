# Mobius Catalog

This directory contains the **Mobius Catalog** - a structured manifest of knowledge artifacts in the Mobius-Substrate repository.

## Purpose

The catalog serves as a **queryable index** for DVA agents and other AI systems, enabling them to:

- Discover EPICON reasoning artifacts
- Navigate documentation structure
- Build semantic understanding of the codebase
- Track knowledge evolution over time

## Generated Files

### `mobius_catalog.json`

The main catalog manifest, generated by the MCP Repo Scanner's `export_catalog` tool.

**Structure:**

```json
{
  "mobius_catalog_version": "1.0.0",
  "generated_at": "2025-12-30T12:00:00Z",
  "repo": {
    "name": "Mobius-Substrate",
    "url": "https://github.com/kaizencycle/Mobius-Substrate",
    "default_branch": "main",
    "commit": "..."
  },
  "stats": {
    "epiconCount": 10,
    "docCount": 742
  },
  "epicons": [...],
  "docs": [...]
}
```

## Generating the Catalog

### Via MCP Tool

If you have the MCP server running:

```bash
# The export_catalog tool writes to this directory
```

### Via npm script

```bash
cd mcp/mobius-repo-scanner
npm run build
npm run export:catalog
```

### Via direct invocation

```bash
MOBIUS_REPO_ROOT=/path/to/Mobius-Substrate node mcp/mobius-repo-scanner/build/index.js --export-catalog
```

## Using the Catalog

### For DVA Agents

1. Read `mobius_catalog.json` to get the full index
2. Use `epicons[]` to find reasoning artifacts by:
   - `tier` - DVA.LITE, DVA.ONE, DVA.FULL, DVA.HIVE, SUBSTRATE
   - `cycle` - Command cycle reference
   - `epicon_type` - design, decision, reflection, incident, spec
   - `tags` - Searchable keywords
3. Use `content_hash` for integrity verification
4. Fetch full content via MCP `read_file` tool

### For Humans

1. Browse EPICONs at `docs/epicon/`
2. Use the catalog to understand knowledge structure
3. Track evolution via `created_at` / `updated_at` timestamps

## Schema

### EPICON Entry

| Field | Type | Description |
|-------|------|-------------|
| `epicon_id` | string | Unique identifier |
| `path` | string | Relative path in repo |
| `title` | string | Human-readable title |
| `cycle` | string? | Command cycle reference |
| `epoch` | string? | Epoch reference |
| `tier` | string? | DVA tier or SUBSTRATE |
| `epicon_type` | string? | Type of EPICON |
| `status` | string | draft, active, deprecated, superseded |
| `author_name` | string? | Author name |
| `tags` | string[] | Searchable keywords |
| `content_hash` | string | SHA256 hash of content |
| `summary` | string | One-line summary |

### Doc Entry

| Field | Type | Description |
|-------|------|-------------|
| `path` | string | Relative path in repo |
| `title` | string | Extracted title |
| `category` | string | Inferred category from path |
| `tags` | string[] | Keywords (if present) |
| `content_hash` | string | SHA256 hash of content |

## Integrity

Each entry includes a `content_hash` field containing a SHA256 hash of the file content. This enables:

- **Verification:** Agents can verify content hasn't been tampered with
- **Change Detection:** Compare hashes to detect modifications
- **Merkle-style Integrity:** Chain hashes for full-repo integrity proof

## Versioning

The catalog follows semantic versioning:

- `mobius_catalog_version: "1.0.0"` - Current version
- Future versions may add fields but maintain backward compatibility

## Automation

Consider setting up:

1. **CI Integration:** Regenerate catalog on each commit to `docs/` or `epicon/`
2. **Nightly Refresh:** Cron job to keep catalog current
3. **PR Validation:** Check that EPICONs have valid frontmatter

---

*"We heal as we walk." â€” Mobius Systems*
